@{
    Layout = "_Layout";
    ViewData["Title"] = "請假申請";
}

<form id="app">
    <div class="row">
        <div class="col-md-4">
            <div class="card-body">
                <div class="form-group">
                    <label for="">申請人</label>
                    <input type="text" class="form-control" :value="name" disabled>
                </div>
                <div class="form-group">
                    <label for="">請假期間</label>
                    <input id="timeRange" type="time" class="form-control ">
                </div>
                <div class="form-group">
                    <label for="">假別選擇</label>
                    <select class="form-control select2 select2-hidden-accessible"
                            style="width: 100%;" data-select2-id="1" tabindex="-1"
                            aria-hidden="true">
                        <option value="">---請選擇---</option>
                        <option v-for="item in vacationDropDownList" :value="item.value">{{item.text}}</option>
                    </select>
                    <span class="select2 select2-container select2-container--default select2-container--below select2-container--focus"
                          dir="ltr" style="width: 100%;">
                        <span class="selection"></span>
                    </span>
                </div>
                <div class="form-group">
                    <label for="">代理人選擇</label>
                    <select class="form-control select2 select2-hidden-accessible"
                            style="width: 100%;" data-select2-id="1" tabindex="-1"
                            aria-hidden="true">
                        <option value="">---請選擇---</option>
                        <option v-for="item in agentDropDownList" :value="item.value">{{item.text}}</option>
                    </select>
                    <span class="select2 select2-container select2-container--default select2-container--below select2-container--focus"
                          dir="ltr" style="width: 100%;">
                        <span class="selection"></span>
                    </span>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card-body">
                <div class="form-group">
                    <section class="content">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">當日班表</h3>
                            </div>
                            <div class="card-body">
                                <div>早上：</div>
                                <div>下午：</div>
                                <div>晚上：</div>
                            </div>
                        </div>
                    </section>
                </div>
                <div class="form-group">
                    <div class="info-box ">
                        <span class="info-box-icon"><i class="far fa-calendar-alt"></i></span>
                        <div class="info-box-content">
                            <span class="info-box-text">請假時數</span>
                            <span class="info-box-number">8hr</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="card-body">
                <div class="form-group">
                    <label>原因：</label>
                    <textarea class="form-control" rows="3"
                              control-id="ControlID-13"></textarea>
                </div>
            </div>
        </div>
    </div>
</form>
@section Scripts {
    
    <script>
        Vue.createApp({
            data() {
                return {
                    timeRagne: [],
                    agentDropDownList: '',
                    vacationDropDownList: '',
                    name: '',
                }
            },
            methods: {
                getTimeRange() {
                    $('#timeRange').daterangepicker({
                        timePicker: true,
                        timePickerIncrement: 30,
                        locale: {
                            format: 'YYYY/MM/DD HH:mm'
                        }, function(strat, end, _) {
                        },
                    });
                },
                getDropDownList() {
                    let self = this;
                    fetch("/api/LeaveApi/GetDropDownList").then(res => res.json()).then(result => {
                        console.log(result);
                        //一個物件裡面有兩個陣列
                        self.agentDropDownList = result.agentDropDownList
                        self.vacationDropDownList = result.vacationDropDownList
                    })
                },
                getName() {
                    let self = this;
                    fetch("/api/LeaveApi/GetEmoloyeeName").then(res=>res.text()).then(result => {
                        console.log(result) 
                        self.name = result
                    })
                },
            },
            mounted() {
                this.getDropDownList();
                this.getName();
                this.getTimeRange();
            }
        }).mount("#app");





    </script>

}
